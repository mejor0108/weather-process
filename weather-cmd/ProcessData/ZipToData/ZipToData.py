import zipfile
import io


class ZipToData:
    """
    Utility class for handling zip files and extracting data from them.
    """

    def __init__(self):
        pass

    def unzip_to_text(self, zip_stream: io.BytesIO):
        """
        Unzips the given zip stream and returns the contents of the first text file found.

        Args:
            zip_stream (io.BytesIO): The zip stream to be unzipped.

        Returns:
            str: The contents of the first text file found in the zip stream.
        """
        with zipfile.ZipFile(zip_stream) as zip_ref:
            filename_txt = zip_ref.namelist()[0]
            file_zip_txt = zip_ref.open(filename_txt)
            resultado_txt = str(file_zip_txt.read())
        
        return resultado_txt
    
if __name__ == "__main__":
    
    texto = b'''PK\x03\x04\x14\x00\x00\x00\x08\x00\x00\x00\x00\x00\xf98t\xe9&\x0b\x00\x00z,\x00\x00\x19\x00\x00\x00estado_tiempo20240423.txt\xa5ZKs\xdc\xb8\x11\xbe\xa7*\xff\x01\xc7\xcdA\x13\x12\xe0\x0b\x99\x934\xb6\x15\xa9\xacGdy\xef\xd0\x0c"\xd1\xe1\x10Zp\xa8\x94\xf4o}\xdc\x83\x0e)\xdfrJ\x03$@r\x00\xcc\xd0\x9b*\xd7z\x0f\xe3\x06\xd0\x8f\xaf\xbf\xfe\x9a\xa7om\xb5\xc4\xe4\xe4\xf4A\x96\xd5\t\x8ep\xb2\x8c\xf3\xbfE\xd1\xf2\x03o\x9e\xf97\xb6\x11\xcb8E\xff\xda.\xe3lA\x97\xd7\x025\x1c\xadY\xb5n+\xb6D\t^~i7\x827;\x8eP\x9c,)\xcd\x16)\xfa+\xfa\xf3\x9f\xd0\x19{zg\xe8\xacb\xf5\x9a\xcd\xb5\x9f\xec\xdb\'\xd9\xf2\xa63\x8e\xe92\x8e\xa2tAz\xeb\xbc.w\x02]\xb6\xdf%\x7f\xdb7\x9f\x06\xccc\xe7\xfa\xd4\x9a\x87\xbb\x17yo[T\xef/L\xce\xbbt\xb1\xc8\x9cK\xd3\x91SH\xae\xee\x9d,pg{\xc5\xb6\xcf\x02m8\xbab\xaf\xc2{\xc2i\xf5(P\xdd>T\xfa\x90H\x1fB\x17\xc4\xb9z1\xf6<\x81_\xc6\xf1"\xeb\x0f\x11R\xd4\xbcB_Z6\xdb;\xa9\x1b\xdc\x14[\xef\xe4\xe0\x1d\x08\x7fg\xfe\x83\xa8\x84\xe4\xcd1\xff\xe8\xab\xe3\xe8p\xca\x14\xea\xe2\x91\xb9\xf8\xc7\n\xdd\xb2Jl\x8f;\xbf7\xee\xf1\x0bq\xcc\xe3E\xd1\x9b\x7f\xe3\xe5\xdb\xd1d4.\xcf\x1d\xd3\xd9\xd8t\xdc\xb9<\xe9L_\xb6\xf5{}\xcc2\xee-\x1f\xce\x98>\xd1\xfb\x84\xf9\xcc\xd0m\xc5v\x7f\xfc\xd6i:\xb2\x9dw\x97&\xc6v\x83>yc\xe9\xcf\x91bQ8>I\xf6\xdd\x1d\x15\xc6\'WLB\xa6W\x07\xee\xef\xcbu\xf7\x01\xc4\xa6a\xd4\xd9\xcf\xad\xfd\x92\xd5\x02]\xc1\x0bj\x7f1y2&v\x9e\x10\xc3\x13\xe4\x90\x8b}\xb2\\qY\xfdq\xa3i\xb4\x17Q\xf0\xba\xb9\xb6\x90?\x9cT\xc9\x02\x86]\x87\xd3\xee\xb6\xda\x17p\xdb\x1em\xaf[\xfe\xc2\x15\xae\\\xb6U\xe9\\\xdb\x1bN\xb0\xee\xe0\xed4\x9cI\x97\x89\xfd\xbdo*\x06\xa8(\xdfg\xa3\xb9{\xf7|\x0c\x8c\x04\xbaEbr\xe5\x96?\xb5\xec\xdb\x8f\xb9\x98\xeb\x98\x9eT\x90\xb9x\x1f\xc9\xdb\xf2\xb1\xfd\xfd\x88e\xdcYN\xdc\xda\x9c\xe0\x95j\x13y\x0f\x83\xb7m\xbdc\xe8\xa2\xde\x94\x02\x9d-N\x17s+\xd49!\x8bL\x82\xc7\xd9$\xa8_X\x8d>qY\xb3z3;\x13S\xe7\xfe\xe3\xfa\xef\x0e\xe8\xcb\xff\x1e\xec\x96\xc7z?\x8e\x82\xd1LFuIi\x8fW\xf7P\x8b\xbf\xb5\x1c\xb0\xa5\x85\xbf\x9c<\xf7\x03\x0b\xf5Te\xb4\x0f\xb6QjOh\xd0\xa9\x94\xe2U\xf8qk\x8a*}6z\xfa\xa7\xb9}\xaa\x8c\xdb\xba\xff\xb5\xac*\x86\xcey\xc3+\xbfo|\xa0\xe5a\x01\xc98#;\xe4\xa2\xe6\x8cS.\xc53\x93\xcaOg\xe0$\x01\xef)gw\xd4\xd8\xd3\x99\xe2}\xb414\xe9\xa7\xad\xfb \x87\xecw\x90\xc8P\x81\x15 ;t\xeb\x00\xc3[\xb5\x0f%\x97@\xd3\xd6\xa2F\xcf\x92\xaf\xcb\xe7r\xc7\xd6\xe5\x8f\x1a1\x04N~)\x1bh\x0c\x16\x8d\x9c\x83\xb31^\xa4K\x9aR\x03\x17\xf7e-\x1eY\xe3\xb6\x15\x9d\x00\xb7p\xa3\x92U[^\xc3?4\x91\xea\x12\x19\x17K\x9c\x03\x11\xec\xf2Kj\xac(rb\xa1\x02\xfe\xdd\x02\xdd\t\x15\x99/\x8c\xd7o\x00L\xff\xf1?\xeezj7\x87\x0c \x11\x84\x06\xe5yo9\x86\xaa(\x8c\xa7\xeex\x03\xaf\xe55\x1cp\xd0W\xc6\x1d\xa9\xcbV\x0b\xed\x8e\x1e=U>\xd9k\xaf\xc4Vl\x80\xf4\xa1\xbb\xf2\x85m\xd8K\xe0\x8cI\xe6\x92.s\x89\x8b\x18@\xba?\x0eL\xc4p\xa7\x06|2\xa3 z\xb3\x91\x87l\xc7\x16\xe6\xc03x\xf09k\x04\xfa\xc0;$\x9dQ\xd1IW\xd1\xd8C\xa3\xc6PG\xe0\x90\xd4r\x85\xdbV\'\xe2\x15\xdb\xc8W?O\xf3\xbd\xc2}\x03\x99R{Js\x9b\x92\x92W\xfc\xdf?\xe1w\xa7\x8a==\xcc&\xfc\xea\x87\xdc\x88\x07\x7fX\xbd\xe9n\x91\xd5\xa1\xf5\xa4\xcfO\xaa\njb\x1d\xdd<4\\\xbe\xb0\x9d\x90.\x87\x08a\x1f\xe0\x91;\xb6\x91\xee\x08pP\x96Yr\xdf\xac\x17\xe8\x14rS\x03\xc0UY\x01\x16\xf8y\xbe\xef\x14\x0f<\xe4\xe9P\x0f\xb9\x0evax\xed\x83\x80_\xbc\xf2\xff\x9b\x13*\x8eB\xcd\x03\x80o\xae\x01L\xfd3\xa7{ql\xdc\xe3\xb6\x06\xc38U7\x8e\xb0i\xf7\xb7e\x05\x8c\x19b\xe0\xa7\x12\x03B\x18&\xe1k\xc9\xa6ri\xdeg\xfe\xdd\xbb@+\x18\x04ws"j\x92\xc6\x8dh1\x80Zfs\xbe\xeb\x95\x87\xe6Aonv%\x00\x08\xe0\xf3\xfb\xb5\x90\x1d\xc0\xd1\xa40\x9e\xef\xce\x01\xff\xbf\xc3i0Q\xa87}\xe1k\xe7E\x99\xcfO\x89;$\xd2\xc8\x96@\x9e\xda\x12\x13R\x96\xea\x9e\xfe\x97\xec\x99\xc5\x89\x8bp\x94\xd8\x9e\xa2\xd1\xb9\xa7D\x17\xbb\xf6\x8d\x95\xf5\xa3\x9f\xddN\x9adU\x89\x97\xf2\xadfK\xb2\xe8N\xc1n\x90\xa9\n\x8e\x1c\x0f\x8b\xc4N\\\\\xae\xf9&\xf0\x80\xebI\x90}\xf7/L\xfa\xf4\xad\xcb\xe4\xbdP\xc1[1\xc0\x06\x17\x9f\xc3Q6\r\x17\xce!0rB\xbdbSTZ\x11I\xa6\xf0\xff\x19J\xebs\xf9\xe0I\xa4,\x0cr\xdd\x11N\x07+\xf0$\x10&\xbe\xf5Z\xc8M\xa07\x1e\x00QHT\xa7\x845\xf6\x98\xa11\xcaM\x97?oY\xc5\x1f[\xf6\xba~\xfa\xef\xdcr\xc3N\x1c\xb2b\x00\xb6\xb4\x9b\x1d\xb1q\x96d\xf5\xf7\x19\xe1\x05F\xea\xd4p\x91\xf5\xa3#\xee\xc6\xa3>\x00\x9f\x84\xdc\x8a\xe6\'\xbc\xd2\x076u\x99\xc3\x98\xa1\xe0\xa4\x037\xabc@x\xc5\x160\xffpvv\xc6\x89\xea\xee\x84*\xa2\x96a\x03\tP\xad4\xb6\xe3\xb9\x80\xf1\x0b\xddV\x9c5\x0c\xfe\x07\x18\xee3\xfc\n\xfdr\xd1Tp\xd2\x15\xab^\xca\x9a5\x7f9\xd2\x01\x88v\x16\xf8\x18\xca\x0c\xe5d\xb9\'f\xe6\x86>|f\xe8\x1f-t\xaec\xb3o\x18\xd90\x1e\x90-\xcblm]\xb6\xdf\xda\xd79\xe5\nLF\x95Q\x06\x0e\x19\xe8\x19\x85\xcc##C\xe8k]\xbep\xd9\x94\x1b\xb6A\xd7\xd0hE\xcd\x1c\xce\x16\xa6\xc8\xfdQ\x90\xcdK\xacz\x00\xca\xe2\xfe(\xb2,2\xab\xff\x9d\xf3\x9aKVA\xbfr\x11\xd8?=R\x17k\xc8\xc4\xd9\x1a\x12"\x03\xf6kE@\\_\xef\xcd\x8e\x89\x99L]\x86\xb3G\xa4ha\x15F\x18\xa9ah\xbf\x0b\xe5\xfb~$\xe3\xdc\xd3\xa3\x06\x94W\x02\x86\xd1\\\x9f\xd8\x16\xee\xecg\xc8\x87\xca\x88\xb8\xbe\xc9\xa2\xa1\x8c\x14\x14\x0fs\xcf\xea\x89?\x07\xd4:\xdb\x9fp\x90\x1e\xe0b2&\xd2$2\xf9\xbdz*+\x18\xcf\\\x8e\xe0\xd2\xef\xfe\xda\x19\xfcQ)\xa2\x15\xa3\xae\x95F6\xab\xa1\\\xeeJ\xf1\xed\xc8\xa4\x13v@ZL\x98]\x86\x07\n\x06\x14\xe9\xb1=F\xec\xach\xe1\x8e\x08\x8auKc\xb9\x00\xce\x88M\xeb\xac7" \x0e\xfb8R\xe1\xe1\xef\xd94l$\x9d\x98>\xce\xae=\xba\x88O\xdf^A&1\x98\xa0lWP:\x11\x90\xa3\xdd{\x8d~\xb9zc\xc7@\xef\x00\xcbK\x8c\xf1\x04\x9b\x94S\xc6\xef\xd8?Y`\xf8s\x9c\x9e{\xcd~4\xf2\x13%Vi\xf9\xda<\xb3\xca\xa7\r\x87\xd4g\xa7\xd01\xed\xef[D\x96\xfc\x9f)\xc1\x0c\xc6\x19=R\xca\xf2Q\xbc\xba*\xd4\x18`{\xde\xd5\xaa\xa19Y\x987\xb8\xac\xab\x18\x12\x87\xea\xf1\xb5\xf7\xcf\x05\xb4\xfb7\x7f\xb3\x0f\x9f\xe0\x1bg\xe8(\xe95h\xd9^w\xf3\xc0\xe5~\xd3\x8f\xa8\x87<\xea#\xc2\x03\x13\x1d\xf5\xa0A\xc6\x04,\xdc\x1cn\xcac\xeb44\xd4\x8c\x1d\x94\xeaE \xb5\xc8\xf8\xcc\xab@\xab\xf0\x95V\xec\xd1\x0e\xf2\xb1\xd6\xa8\xc4\x96^\xf6\xe6\xedo\xed\xef3\x06\xfa0+\xc2t\xa2n\xd1\xc2\n\xdeg\x0c,\x8a\xf5\x93\x1fm<C\xaa*\xd7TI@\xa3\x95\x05\xd5\x85j\xe0\xbb|\x16U\xc5w\xbbr\x06\xce\xa6}*:\x10@\xac3t\x9ad\x06\x06>Vju\xd9\xb8\xcb\x05\xd7xX\xfcIR\x03\x01\x85U\xf9\xae\xd8omY\xaf\x9f\xd81\xd8J\x02\xb2\tN\xa7\x8d\'\xb6{\\=\x9d\xaa\xf9\x91\xb9\x12wh\x8d\xeb\xce\xd3\xd9\xc8!\xe3\xe5\x99\xc2\xae\xd3z\'\xeaR \xfd\x8b\xd9\xf2\x8c\xdb;\ry\xee\xe4\xd5a2\xe5\x9b\xed\x91>g\x9d\xed\xae[\xc6$(\x8d\xbae\xa5mH\xbb\xef\xfeH\xce\x93U\x8bn\xcas(z:\x16\x11il7\xd37\xd2=\xee\xc0d\xd4\xd1t%\xf3\x91T\x93\xe7hb7\xb3U\x14\x94$\x8fI\xb5D\x91rR\x00\x01CYj\xe5\x98\x82\x0c\xc1\xad\x02k\xc5C\xe4V\x91\x16\xf8O\nF\xc9\xd0\x95\x8a<5\x11\xbd\x87F\xca\x1e\x7f\x8a6\x1b_$K\x92h\xcb\xc9 \x96\xa4V,\xb9dPA~\xb3\xd7\xd3\xe4K\xddL\x81)\xa8\xeftE2\xee\xcc\x97-;\xbav\x0en\xfb\xc6\x84\x05\x90/\xc9\xc6u\xf3\xb9-\x8f\xad\x0c\xb0\xd1(\x1c\x8el%d\xa8|JF!3\xec[/\x86a"\x07:7\x83sa#\xb9\xb8\x9ck\xf25A\xac\x89K<\x16\x8d\xee\xf8k-\xaa\xcd\xbc\xedG\xec\x8e\x12\xe6!\x80\x084\xb3\x9b9\x80Z\x08\x07\xb0\xa2\x00\xa4\x1c\x90\xbdb\x9f \x98\x8f$\x9d\x98\xe8&\xd4\xf7\xfes\xf1\xa0\x08\xcdFHt.\xf9cpY\xef\x93\xc8\xfd\xca\xac\x81J\xf5 jp\xf8\x96K\xf5=\x8d\x7f\x95\xee\x1e\x90\x06U~b\xf7jJ\x80\x07\xe6n\xb7\xa5\x1a\xb2\xc0\xe3\xdc\x03\xf5A\x1c\xf6p\x814\n\x8a\x0c\xaa\x9b\x9c\x03\xa7\x04?\x1dV\x19\xec\x96\xc2\xe9\x7f\x19^N\x97]\xd1\xa4*\xd4z=\x80\x93{\xb6C\xfb\ti6\x8e\xc9t&]\xc9\xd6\xff\xa9\xce\x98\x84\x05\xd1\xbec\x0b\x8a\xd2g\x8bh\xbckQ\x9f\xee\x00\x173\x8b"\x1e\xd2\xd7\xf6\xe4\x06\x8f&^\x98\xdb\'\xcb\x93\xde\xddz,\xf0\x03\xfb\xbe\\\xea\x81\x9f\xa2\xb0\x06u\x10\x0b\xb3)\x83\x97\x02\xe1\xf0l\xf7|\xc2\x88\x1eD3\xb0FF\x1fF\x0c\x1f\x8a)\xb0\x99;o\x01\x92\xb9_\xb8E#)q\xf8\xde\xa7\x8b\xd9\'\x7f\xf5\x0fo7_\xfc\xb8o\xc7\xb6E\xe8\xa6o\xcc\xb6\x8afU\x81\x18M\x1a?\x8c\x91\n^\x18\xe2\xb5J\x83\'\xa0P\x08.\x05u,\xe4\xb0\x96\xf6\xcd\x00\x13\x8d\xba\xef\xd2\xbfr\x851\xe8\xbe\xe5\xa1E\x81\xe7K\x06\xf7\x8b\xb1xl\xdc\xd6\xfe=\x97[\xd6\xa8\xafS\xee\x80\x88\xfd]\x84>g\xd8\xf3\x9b\xefk\x86<7x\xacG\x98q\t\x95\xecQ\xe8\xb6\xa2~ \x0f\x9f0\x15\xdb\xf1"8\xba\xd2\xf1L\xaf\x80\xd9\x1e\xa9\xb1F\xb2\x1a^\x15\xfc\xfac\n\t\x8az$\x8a\xce\x14\xd4\xcca\xdd\x87\rV\xde\xf8\xda<\xb5\xecg\x04\xea\xcep\xa2\x88\x92^=\xa7\xc6p7\x81\x99o2\xdau\xbb\r\xa0\x96\xdf#\xc1\xe5\xe1dH\xcd\xb44e\xe6n\x06\xbf;\xe3\xd5\xa3T\xdfd]\\\xccU\x92N`<r\xb0&\x8b\'l2\xcd&\xa7|\x84L\x84S\\\xb5\xc6\xf3\xf9Gw\x86b\x91\'\x10\xdf|\xef\x13\'@d\n\x84*\x1d\x19_1Y\x95\xb5\x7f@;@\xffNHw\x8aB\xb5\xf1t\x96\x8fL_\x01\xd9\xd9>\xccZ\xad\xea\x00\xa8\x1bg`9V\x90\x9e\xf6\xf8\x06\x80\xa4\xd8u2\xb2{#\xd7\xbe\x11\xde\x1d\x16j\xae\xb8\xb8Y.\x9d(\x99\xe3D\x0f\x81}\x9e\x8f\x18Hn\x87(}\xc4 1\xcd\xf6y\xaa\xad\xc7\xda\'\xd1\xa8j\xed\xc0\xfa?\xf98t\xe9&\x0b\x00\x00z,\x00\x00PK\x01\x02\x00\x00\x14\x00\x00\x00\x08\x00\x00\x00\x00\x00\xf98t\xe9&\x0b\x00\x00z,\x00\x00\x19\x00\x00\x00\x00\x00\x00\x00\x00\x00 \x00\x00\x00\x00\x00\x00\x00estado_tiempo20240423.txtPK\x05\x06\x00\x00\x00\x00\x01\x00\x01\x00G\x00\x00\x00i\x0b\x00\x00\x00\x00'''
       
    data = io.BytesIO( texto )
    
    prueba = ZipToData()
    print( prueba.unzip_to_text(data) )
    